{% extends 'base.html' %}
{% load static %}
{% block seo %}
    
{% endblock seo %}
    


{% block body %}
<div class="container">
    <nav aria-label="Breadcrumb" class="breadcrumb">
    <ol itemscope itemtype="https://schema.org/BreadcrumbList">
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{% url 'home:home' %}" itemprop="item">
            <span itemprop="name" class="sr-only">Home</span>
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
        </a>
        <meta itemprop="position" content="1" />
        </li>
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{% url 'shop:shop' %}" itemprop="item">
                <span itemprop="name" class="sr-only">Merchandise</span>
                Merchandise
            </a>
            <meta itemprop="position" content="1" />
            </li>
    
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="#" itemprop="item" aria-current="page">
            <span itemprop="name">{{data}}</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
    </ol>
    </nav>
</div>

     <!-- causes details Area -->
     <section id="trending_causes_main" class="mt-3">
        <div class="container">
            <div class="row" id="counter">
                <div class="col-lg-4">
                    <div class="sidebar_first">
                        <!-- Project Organizer -->
                        <div class="sidebar_boxed">
                            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item 
                                    
                                      active
                                       ">
                                      <img class="d-block w-100" src="{{data.image.url}}" alt="{{ie.name}}">
                                    </div>
                                  {% if data.img1 %}
                                  <div class="carousel-item 
                                 
                                     ">
                                    <img class="d-block w-100" src="{{data.img1.url}}" alt="{{ie.name}}">
                                  </div>
                                  {% endif %}
                                    
                                 
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                  <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                  <span class="sr-only">Next</span>
                                </a>
                              </div>
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="details_wrapper_area">
                       
                        <div class="causes_boxed_text">
                            <h3><a class="section_heading2 text-left text-success" href="{% url 'home:blogs_detail' data.slug %}">
                                {{data.product_name}}
                            </a></h3>
                            <p class="text-dark">
                                {{data.short_desc}}
                            </p>
                            <p>
                                {{data.description|safe}}
                            </p>
                            
                            <div class="causes_boxed_bottom_wrapper">
                                <div class="row">
                                    <div class="col-lg-12 mb-3 ">
                                        <div class="casuses_bottom_boxed">
                                            <span>
                                                <b>Price:</b>
                                            </span>
                                            
                                            {% if data.mrp %}
                                            <span class="mrp ml-2">
                                                {{data.mrp}} 
                                            </span>
                                            {% endif %}
                                                
                                            <span class="sp pl-2">
                                                {{data.sp}} $
                                            </span>

                                         
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12">
                                        <div class="casuses_bottom_boxed casuses_left_padding">
                                            {% if data.cartitem %}
                                            <div id="pp">
                                                <div class="number d-flex" style="width: 120px;" >
                                                    <span data-id="{{data.id}}" class="minus">-</span>
                                                    <input type="text" name="qty" style="width:50px; text-align:center" value="{{data.cartitemID}}" disabled/>
                                                    <span data-id="{{data.id}}" class="plus">+</span>
                                                </div>
                                            </div>    
                                            {% else %}
                                            
                                           <div id="pp">
                                            {% if user.is_authenticated %}

                                            <a href="javascript:void(0);" class="btn btn_navber d-flex addToCart d-flex" data-id="{{data.id}}">
                                                <div class="casuses_bottom_icon">
                                                    <i class="fa fa-shopping-cart text-success"></i>
                                                </div>
                                                <div class="casuses_bottom_content">
                                                    Add To Cart
                                                </div>
                                                
                                            </a> 
                                           
                                            {% else %}
                                            <a href="javascript:void(0);" class="btn btn_navber d-flex d-flex" data-toggle="modal" data-target="#loginModal">
                                                <div class="casuses_bottom_icon">
                                                    <i class="fa fa-shopping-cart text-success"></i>
                                                </div>
                                                <div class="casuses_bottom_content">
                                                    Add To Cart
                                                </div>
                                                
                                            </a>
                                            {% endif %}
                                           </div>
                                            

                                            {% endif %}
                                          
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                     
                    </div>
                </div>

                <div>
                    
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                        <a class="nav-link active" href="#profile" role="tab" data-toggle="tab">Additional Information</a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link" href="#buzz" role="tab" data-toggle="tab">Leave A Review</a>
                        </li>
                        
                    </ul>
                    
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane in active" id="profile">
                            <div class="sidebar_boxed">
                                {{data.addional_info|safe}}
                            </div>

                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="buzz">
                            <div class="col-12">
                                <div class="comment_form_area">
                                    <h3>Leave a feedback</h3>
                                    <div class="comment_form">
                                        <form action="#!" id="comment_form">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" placeholder="Enter full name"
                                                            required />
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <input type="text" class="form-control"
                                                            placeholder="Enter email address" required />
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group">
                                                        <textarea rows="5" placeholder="Write your feedback"
                                                            class="form-control" required></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="submit_btn">
                                                        <button class="btn btn_theme btn_md">Submit Feedback</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <div role="tabpanel" class="tab-pane fade" id="references">ccc</div> -->
                    </div>
                </div>

               
                
            </div>
        </div>
    </section>
{% endblock body %}
    




{% block js %}
<script type="text/javascript">
    $(document).on('click', '.addToCart', function (e) {
        e.preventDefault();
        name = $(this).data('id');
        url_pattern = "/shop/add-to-cart/";
        $.ajax({
            type: "GET",
            url: url_pattern,
            data:{
                'name':name
            },
            success: function (response) {


                product_id = response.idd;
                qty = response.qty;
                $('#pp').empty();
                $('#pp').append(
                    `
                    <div class="number d-flex" style="width: 120px;" >
                        <span data-id="${product_id}" class="minus">-</span>
                        <input type="text" name="qty" style="width:50px; text-align=center" value="1" disabled/>
                        <span data-id="${product_id}" class="plus">+</span>
                    </div>
                    `
                );
                
                
                   
            },
            error:function (data) {
                console.log('An error occurred.');
                
            },
        
        });
        $(this).removeData();
    });
  </script>


<script type="text/javascript">
    $(document).on('click', '.minus', function (e) {
       e.preventDefault();
       name = $(this).data('id');
       url_pattern = "/shop/minus/";
       $.ajax({
           type: "GET",
           url: url_pattern,
           data:{
               'name':name
           },
           success: function (response) {


               product_id = response.idd;
               qty = response.data;
               if (qty == 0){
                   $('#pp').empty();
                   $('#pp').append(
                    `
                    <a href="javascript:void(0);" class="addToCart btn btn_navber d-flex d-flex" data-id="${product_id}">
                        <div class="casuses_bottom_icon">
                            <i class="fa fa-shopping-cart text-success"></i>
                        </div>
                        <div class="casuses_bottom_content">
                            Add To Cart
                        </div>
                        
                    </a> 
                    `
                );
               }
               else{
                $('#pp').empty();
                $('#pp').append(
                    `
                    <div class="number d-flex" style="width: 120px;" >
                        <span data-id="${product_id}" class="minus">-</span>
                        <input type="text" name="qty" style="width:50px; text-align:center" value="${qty}" disabled/>
                        <span data-id="${product_id}" class="plus">+</span>
                    </div>
                    `
                );
                
               }

               
               
                  
           },
           error:function (data) {
               console.log('An error occurred.');
               
           },
       
       });
       $(this).removeData();
   });
 </script>


<script type="text/javascript">
    $(document).on('click', '.plus', function (e) {
       e.preventDefault();
       name = $(this).data('id');
       url_pattern = "/shop/plus/";
       $.ajax({
           type: "GET",
           url: url_pattern,
           data:{
               'name':name
           },
           success: function (response) {


               product_id = response.idd;
               qty = response.data;
               if (qty == 0){
                   $('#pp').empty();
                   $('#pp').append(
                    `
                    <a href="javascript:void(0);" class="addToCart d-flex" data-id="${product_id}">
                        <div class="casuses_bottom_icon">
                            <i class="fa fa-shopping-cart text-success"></i>
                        </div>
                        <div class="casuses_bottom_content">
                            Add To Cart
                        </div>
                        
                    </a> 
                    `
                );
               }
               else{
                $('#pp').empty();
                $('#pp').append(
                    `
                    <div class="number d-flex" style="width: 120px;" >
                        <span data-id="${product_id}" class="minus">-</span>
                        <input type="text" name="qty" style="width:50px; text-align:center" value="${qty}" disabled/>
                        <span data-id="${product_id}" class="plus">+</span>
                    </div>
                    `
                );
                
               }

               
               
                  
           },
           error:function (data) {
               console.log('An error occurred.');
               
           },
       
       });
       $(this).removeData();
   });
 </script>


{% endblock  %}
    